openapi: 3.0.3
info:
  title: Bot Agent API
  description: |
    Bot Agent å¤šåœºæ™¯AIåŠ©æ‰‹åä½œå¹³å° - åç«¯APIæ¥å£æ–‡æ¡£

    ## åŠŸèƒ½æ¦‚è¿°
    - **Botç®¡ç†**: åˆ›å»ºã€é…ç½®ã€ç®¡ç†å¤šä¸ªåœºæ™¯åŒ–çš„AIåŠ©æ‰‹
    - **SOPå·¥ä½œæµ**: å®šæ—¶ä»»åŠ¡ã€è‡ªåŠ¨åŒ–å·¥ä½œæµç¼–æ’
    - **ç¾¤èŠåä½œ**: å¤šBotååŒå¯¹è¯ï¼Œæ™ºèƒ½æ¶ˆæ¯è·¯ç”±
    - **è®°å¿†ç®¡ç†**: Botä¸Šä¸‹æ–‡è®°å¿†å­˜å‚¨
    - **æ•°æ®åˆ†æ**: å¯¹è¯ç»Ÿè®¡ã€æ€§èƒ½åˆ†æ

    ## è®¤è¯æ–¹å¼
    APIä½¿ç”¨Bearer Tokenè®¤è¯ï¼Œè¯·åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ :
    ```
    Authorization: Bearer {your_token}
    ```
  version: 1.0.0
  contact:
    name: Bot Agent Team
    email: support@botagent.com
  license:
    name: MIT

servers:
  - url: http://localhost:3000/api
    description: æœ¬åœ°å¼€å‘ç¯å¢ƒ
  - url: https://api.botagent.com/api
    description: ç”Ÿäº§ç¯å¢ƒ

tags:
  - name: Auth
    description: è®¤è¯ä¸ä¼šè¯ç®¡ç†
  - name: Dashboard
    description: ä»ªè¡¨ç›˜æ•°æ®
  - name: Bots
    description: Botç®¡ç†
  - name: Workflows
    description: SOPå·¥ä½œæµç®¡ç†
  - name: Groups
    description: ç¾¤èŠç®¡ç†
  - name: Memories
    description: è®°å¿†ç®¡ç†
  - name: Knowledge
    description: çŸ¥è¯†åº“ç®¡ç†
  - name: Analytics
    description: æ•°æ®åˆ†æ

paths:
  /auth/login:
    post:
      tags:
        - Auth
      summary: ç”¨æˆ·ç™»å½•
      description: ä½¿ç”¨è´¦å·å¯†ç ç™»å½•å¹¶è·å–è®¿é—®ä»¤ç‰Œ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: ç™»å½•æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthTokens'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /auth/refresh:
    post:
      tags:
        - Auth
      summary: åˆ·æ–°è®¿é—®ä»¤ç‰Œ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: åˆ·æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthTokens'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /auth/me:
    get:
      tags:
        - Auth
      summary: è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
      security:
        - bearerAuth: []
      responses:
        '200':
          description: æˆåŠŸè¿”å›å½“å‰ç”¨æˆ·ä¿¡æ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthUser'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /auth/logout:
    post:
      tags:
        - Auth
      summary: é€€å‡ºç™»å½•
      security:
        - bearerAuth: []
      responses:
        '204':
          description: é€€å‡ºæˆåŠŸ

  /dashboard/stats:
    get:
      tags:
        - Dashboard
      summary: è·å–ä»ªè¡¨ç›˜ç»Ÿè®¡æ•°æ®
      description: è·å–ç³»ç»Ÿå…³é”®æŒ‡æ ‡ï¼ŒåŒ…æ‹¬æ´»è·ƒBotæ•°ã€è¿è¡Œä¸­çš„å·¥ä½œæµã€æ´»è·ƒç¾¤èŠæ•°ã€ä»Šæ—¥å¯¹è¯æ¬¡æ•°
      security:
        - bearerAuth: []
      responses:
        '200':
          description: æˆåŠŸè¿”å›ç»Ÿè®¡æ•°æ®
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DashboardStats'
              example:
                active_bots: 8
                running_workflows: 12
                active_groups: 5
                today_conversations: 156

  /dashboard/activities:
    get:
      tags:
        - Dashboard
      summary: è·å–æœ€è¿‘æ´»åŠ¨è®°å½•
      description: è·å–ç³»ç»Ÿæœ€è¿‘çš„æ´»åŠ¨æ—¥å¿—ï¼ŒåŒ…æ‹¬å·¥ä½œæµæ‰§è¡Œã€æ–°æ¶ˆæ¯ã€è­¦å‘Šç­‰
      security:
        - bearerAuth: []
      parameters:
        - name: limit
          in: query
          description: è¿”å›è®°å½•æ•°é‡
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: æˆåŠŸè¿”å›æ´»åŠ¨è®°å½•
          content:
            application/json:
              schema:
                type: object
                properties:
                  activities:
                    type: array
                    items:
                      $ref: '#/components/schemas/Activity'
              example:
                activities:
                  - execution_id: exec_001
                    title: å·¥ä½œæµæ‰§è¡ŒæˆåŠŸ
                    description: æ¯æ—¥å·¥ä½œå¯åŠ¨æµç¨‹ å·²å®Œæˆ
                    type: success
                    icon: âœ“
                    time: 8:00 AM
                    timestamp: 2024-01-15T08:00:00Z

  /bots:
    get:
      tags:
        - Bots
      summary: è·å–Botåˆ—è¡¨
      description: è·å–å½“å‰ç”¨æˆ·çš„æ‰€æœ‰Botï¼Œæ”¯æŒæŒ‰ç±»å‹å’ŒçŠ¶æ€ç­›é€‰
      security:
        - bearerAuth: []
      parameters:
        - name: type
          in: query
          description: æŒ‰ç±»å‹ç­›é€‰ (work/life/love/group/sop)
          schema:
            type: string
            enum: [work, life, love, group, sop]
        - name: status
          in: query
          description: æŒ‰çŠ¶æ€ç­›é€‰ (online/offline/suspended)
          schema:
            type: string
            enum: [online, offline, suspended]
        - name: page
          in: query
          description: é¡µç 
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: page_size
          in: query
          description: æ¯é¡µæ•°é‡
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: æˆåŠŸè¿”å›Botåˆ—è¡¨
          content:
            application/json:
              schema:
                type: object
                properties:
                  bots:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bot'
                  total:
                    type: integer
                  page:
                    type: integer
                  page_size:
                    type: integer
    post:
      tags:
        - Bots
      summary: åˆ›å»ºæ–°Bot
      description: åˆ›å»ºä¸€ä¸ªæ–°çš„Botå®ä¾‹
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BotCreateRequest'
            example:
              name: å†™ä½œåŠ©æ‰‹
              avatar: âœï¸
              type: work
              scene: work
              description: ä¸“ä¸šçš„å†™ä½œè¾…åŠ©AIåŠ©æ‰‹
              config:
                model: gpt-4
                temperature: 0.7
                max_tokens: 2000
      responses:
        '201':
          description: Botåˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bot'
        '400':
          $ref: '#/components/responses/BadRequest'

  /bots/{bot_id}:
    get:
      tags:
        - Bots
      summary: è·å–Botè¯¦æƒ…
      description: è·å–æŒ‡å®šBotçš„å®Œæ•´ä¿¡æ¯
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BotId'
      responses:
        '200':
          description: æˆåŠŸè¿”å›Botè¯¦æƒ…
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bot'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - Bots
      summary: æ›´æ–°Botä¿¡æ¯
      description: æ›´æ–°Botçš„åŸºæœ¬ä¿¡æ¯å’Œé…ç½®
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BotId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BotUpdateRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bot'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - Bots
      summary: åˆ é™¤Bot
      description: åˆ é™¤æŒ‡å®šçš„BotåŠå…¶ç›¸å…³æ•°æ®
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BotId'
      responses:
        '204':
          description: åˆ é™¤æˆåŠŸ
        '404':
          $ref: '#/components/responses/NotFound'

  /bots/{bot_id}/status:
    put:
      tags:
        - Bots
      summary: æ›´æ–°BotçŠ¶æ€
      description: å¯ç”¨/ç¦ç”¨/æš‚åœBot
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BotId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: string
                  enum: [online, offline, suspended]
                  description: online=åœ¨çº¿, offline=ç¦»çº¿, suspended=æš‚åœ
            example:
              status: online
      responses:
        '200':
          description: çŠ¶æ€æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bot'
        '404':
          $ref: '#/components/responses/NotFound'

  /bots/{bot_id}/conversations:
    get:
      tags:
        - Bots
      summary: è·å–Botå¯¹è¯å†å²
      description: è·å–æŒ‡å®šBotçš„å¯¹è¯è®°å½•
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BotId'
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
        - name: before
          in: query
          description: è·å–æ­¤æ—¶é—´æˆ³ä¹‹å‰çš„æ¶ˆæ¯
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: æˆåŠŸè¿”å›å¯¹è¯è®°å½•
          content:
            application/json:
              schema:
                type: object
                properties:
                  conversations:
                    type: array
                    items:
                      $ref: '#/components/schemas/Message'
                  has_more:
                    type: boolean

  /workflows:
    get:
      tags:
        - Workflows
      summary: è·å–å·¥ä½œæµåˆ—è¡¨
      description: è·å–SOPå·¥ä½œæµåˆ—è¡¨ï¼Œæ”¯æŒæŒ‰Botç­›é€‰
      security:
        - bearerAuth: []
      parameters:
        - name: bot_id
          in: query
          description: ç­›é€‰æŒ‡å®šBotçš„å·¥ä½œæµ
          schema:
            type: string
        - name: enabled
          in: query
          description: ç­›é€‰å¯ç”¨çŠ¶æ€
          schema:
            type: boolean
        - name: page
          in: query
          schema:
            type: integer
            default: 1
      responses:
        '200':
          description: æˆåŠŸè¿”å›å·¥ä½œæµåˆ—è¡¨
          content:
            application/json:
              schema:
                type: object
                properties:
                  workflows:
                    type: array
                    items:
                      $ref: '#/components/schemas/Workflow'
                  total:
                    type: integer
    post:
      tags:
        - Workflows
      summary: åˆ›å»ºå·¥ä½œæµ
      description: åˆ›å»ºæ–°çš„SOPå·¥ä½œæµ
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkflowCreateRequest'
            example:
              bot_id: work_bot_001
              name: æ¯æ—¥å·¥ä½œå¯åŠ¨æµç¨‹
              description: æ¯å¤©8ç‚¹è‡ªåŠ¨å‘é€å·¥ä½œè®¡åˆ’
              triggers:
                - type: cron
                  expression: 0 8 * * *
                  timezone: Asia/Shanghai
              workflow_steps:
                - step: 1
                  action: send_message
                  content: æ—©ä¸Šå¥½ï¼ä»Šå¤©æ˜¯{date}
                  ai_generate: true
                - step: 2
                  action: fetch_calendar
                  source: google_calendar
              enabled: true
      responses:
        '201':
          description: å·¥ä½œæµåˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workflow'
        '400':
          $ref: '#/components/responses/BadRequest'

  /workflows/{workflow_id}:
    get:
      tags:
        - Workflows
      summary: è·å–å·¥ä½œæµè¯¦æƒ…
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkflowId'
      responses:
        '200':
          description: æˆåŠŸè¿”å›å·¥ä½œæµè¯¦æƒ…
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workflow'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
        - Workflows
      summary: æ›´æ–°å·¥ä½œæµ
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkflowId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkflowUpdateRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workflow'
    delete:
      tags:
        - Workflows
      summary: åˆ é™¤å·¥ä½œæµ
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkflowId'
      responses:
        '204':
          description: åˆ é™¤æˆåŠŸ

  /workflows/{workflow_id}/enable:
    put:
      tags:
        - Workflows
      summary: å¯ç”¨/ç¦ç”¨å·¥ä½œæµ
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkflowId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [enabled]
              properties:
                enabled:
                  type: boolean
            example:
              enabled: true
      responses:
        '200':
          description: çŠ¶æ€æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workflow'

  /workflows/{workflow_id}/execute:
    post:
      tags:
        - Workflows
      summary: æ‰‹åŠ¨æ‰§è¡Œå·¥ä½œæµ
      description: ç«‹å³æ‰§è¡ŒæŒ‡å®šçš„å·¥ä½œæµ
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkflowId'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                params:
                  type: object
                  description: å·¥ä½œæµæ‰§è¡Œå‚æ•°
                  additionalProperties: true
      responses:
        '202':
          description: å·¥ä½œæµå·²å¼€å§‹æ‰§è¡Œ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowRun'

  /workflows/{workflow_id}/executions:
    get:
      tags:
        - Workflows
      summary: è·å–å·¥ä½œæµæ‰§è¡Œå†å²
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkflowId'
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, running, completed, failed, cancelled]
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: æˆåŠŸè¿”å›æ‰§è¡Œå†å²
          content:
            application/json:
              schema:
                type: object
                properties:
                  executions:
                    type: array
                    items:
                      $ref: '#/components/schemas/WorkflowRun'
                  total:
                    type: integer

  /workflows/{workflow_id}/executions/{execution_id}:
    get:
      tags:
        - Workflows
      summary: è·å–æ‰§è¡Œè¯¦æƒ…
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkflowId'
        - name: execution_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: æˆåŠŸè¿”å›æ‰§è¡Œè¯¦æƒ…
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowRun'

  /groups:
    get:
      tags:
        - Groups
      summary: è·å–ç¾¤èŠåˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [personal, team, public]
        - name: status
          in: query
          schema:
            type: string
            enum: [active, inactive, archived]
      responses:
        '200':
          description: æˆåŠŸè¿”å›ç¾¤èŠåˆ—è¡¨
          content:
            application/json:
              schema:
                type: object
                properties:
                  groups:
                    type: array
                    items:
                      $ref: '#/components/schemas/GroupChat'
    post:
      tags:
        - Groups
      summary: åˆ›å»ºç¾¤èŠ
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupCreateRequest'
            example:
              name: åˆ›ä¸šé¡¾é—®å›¢
              type: team
              description: CEOã€CTOã€CMOä¸‰ä½ä¸“å®¶BotååŒ
              routing_strategy: keyword_match
              conversation_mode: multi_turn
      responses:
        '201':
          description: ç¾¤èŠåˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupChat'

  /groups/{group_id}:
    get:
      tags:
        - Groups
      summary: è·å–ç¾¤èŠè¯¦æƒ…
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/GroupId'
      responses:
        '200':
          description: æˆåŠŸè¿”å›ç¾¤èŠè¯¦æƒ…
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupChat'
    put:
      tags:
        - Groups
      summary: æ›´æ–°ç¾¤èŠä¿¡æ¯
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/GroupId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupUpdateRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupChat'
    delete:
      tags:
        - Groups
      summary: åˆ é™¤ç¾¤èŠ
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/GroupId'
      responses:
        '204':
          description: åˆ é™¤æˆåŠŸ

  /groups/{group_id}/members:
    post:
      tags:
        - Groups
      summary: æ·»åŠ Botåˆ°ç¾¤èŠ
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/GroupId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupMemberAddRequest'
            example:
              bot_id: ceo_bot_001
              role: CEO
              permissions: [read, write, mention]
              trigger_keywords: [æˆ˜ç•¥, å†³ç­–, èµ„æº]
              priority: 1
      responses:
        '201':
          description: Botæ·»åŠ æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupMember'
        '400':
          description: Botå·²åœ¨ç¾¤èŠä¸­

  /groups/{group_id}/members/{member_id}:
    delete:
      tags:
        - Groups
      summary: ä»ç¾¤èŠç§»é™¤Bot
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/GroupId'
        - name: member_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: ç§»é™¤æˆåŠŸ

  /groups/{group_id}/routing:
    put:
      tags:
        - Groups
      summary: æ›´æ–°ç¾¤èŠè·¯ç”±ç­–ç•¥
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/GroupId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [routing_strategy]
              properties:
                routing_strategy:
                  type: string
                  enum: [keyword_match, ai_judge, round_robin, broadcast]
                conversation_mode:
                  type: string
                  enum: [single_turn, multi_turn]
            example:
              routing_strategy: ai_judge
              conversation_mode: multi_turn
      responses:
        '200':
          description: è·¯ç”±ç­–ç•¥æ›´æ–°æˆåŠŸ

  /groups/{group_id}/messages:
    get:
      tags:
        - Groups
      summary: è·å–ç¾¤èŠæ¶ˆæ¯å†å²
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/GroupId'
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
        - name: before
          in: query
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: æˆåŠŸè¿”å›æ¶ˆæ¯å†å²
          content:
            application/json:
              schema:
                type: object
                properties:
                  messages:
                    type: array
                    items:
                      $ref: '#/components/schemas/GroupMessage'
                  has_more:
                    type: boolean
    post:
      tags:
        - Groups
      summary: å‘é€æ¶ˆæ¯åˆ°ç¾¤èŠ
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/GroupId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [content]
              properties:
                content:
                  type: string
                  description: æ¶ˆæ¯å†…å®¹
                mentioned_bots:
                  type: array
                  items:
                    type: string
                  description: '@æåŠçš„Bot IDåˆ—è¡¨'
            example:
              content: å¸®æˆ‘åˆ†æä¸€ä¸‹å¸‚åœºç­–ç•¥
              mentioned_bots: [cmo_bot_001]
      responses:
        '201':
          description: æ¶ˆæ¯å‘é€æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupMessage'
        '400':
          $ref: '#/components/responses/BadRequest'

  /memories:
    get:
      tags:
        - Memories
      summary: è·å–è®°å¿†åˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - name: bot_id
          in: query
          schema:
            type: string
        - name: type
          in: query
          schema:
            type: string
            enum: [conversation, preference, fact, instruction]
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
      responses:
        '200':
          description: æˆåŠŸè¿”å›è®°å¿†åˆ—è¡¨
          content:
            application/json:
              schema:
                type: object
                properties:
                  memories:
                    type: array
                    items:
                      $ref: '#/components/schemas/Memory'
    post:
      tags:
        - Memories
      summary: åˆ›å»ºè®°å¿†
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MemoryCreateRequest'
      responses:
        '201':
          description: è®°å¿†åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Memory'

  /memories/{memory_id}:
    put:
      tags:
        - Memories
      summary: æ›´æ–°è®°å¿†
      security:
        - bearerAuth: []
      parameters:
        - name: memory_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                importance:
                  type: number
                  format: float
                  minimum: 0
                  maximum: 1
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Memory'
    delete:
      tags:
        - Memories
      summary: åˆ é™¤è®°å¿†
      security:
        - bearerAuth: []
      parameters:
        - name: memory_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: åˆ é™¤æˆåŠŸ

  /knowledge/files:
    get:
      tags:
        - Knowledge
      summary: è·å–çŸ¥è¯†æ–‡ä»¶åˆ—è¡¨
      security:
        - bearerAuth: []
      parameters:
        - name: bot_id
          in: query
          description: æŒ‰Botç­›é€‰
          schema:
            type: string
        - name: status
          in: query
          description: æ–‡ä»¶å¤„ç†çŠ¶æ€
          schema:
            type: string
            enum: [uploading, processing, ready, failed]
      responses:
        '200':
          description: æˆåŠŸè¿”å›çŸ¥è¯†æ–‡ä»¶åˆ—è¡¨
          content:
            application/json:
              schema:
                type: object
                properties:
                  files:
                    type: array
                    items:
                      $ref: '#/components/schemas/KnowledgeFile'
    post:
      tags:
        - Knowledge
      summary: ä¸Šä¼ çŸ¥è¯†æ–‡ä»¶
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [bot_id, file]
              properties:
                bot_id:
                  type: string
                file:
                  type: string
                  format: binary
      responses:
        '201':
          description: ä¸Šä¼ æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeFile'
        '400':
          $ref: '#/components/responses/BadRequest'

  /knowledge/files/{file_id}:
    delete:
      tags:
        - Knowledge
      summary: åˆ é™¤çŸ¥è¯†æ–‡ä»¶
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/KnowledgeFileId'
      responses:
        '204':
          description: åˆ é™¤æˆåŠŸ
        '404':
          $ref: '#/components/responses/NotFound'

  /knowledge/search:
    post:
      tags:
        - Knowledge
      summary: çŸ¥è¯†æ£€ç´¢
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KnowledgeSearchRequest'
      responses:
        '200':
          description: æ£€ç´¢æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeSearchResult'
        '400':
          $ref: '#/components/responses/BadRequest'

  /analytics/conversations:
    get:
      tags:
        - Analytics
      summary: è·å–å¯¹è¯åˆ†ææ•°æ®
      security:
        - bearerAuth: []
      parameters:
        - name: start_date
          in: query
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          schema:
            type: string
            format: date
        - name: bot_id
          in: query
          schema:
            type: string
      responses:
        '200':
          description: æˆåŠŸè¿”å›å¯¹è¯åˆ†ææ•°æ®
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationAnalytics'

  /analytics/bots:
    get:
      tags:
        - Analytics
      summary: è·å–Botæ€§èƒ½åˆ†æ
      security:
        - bearerAuth: []
      parameters:
        - name: start_date
          in: query
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: æˆåŠŸè¿”å›Botæ€§èƒ½æ•°æ®
          content:
            application/json:
              schema:
                type: object
                properties:
                  bot_stats:
                    type: array
                    items:
                      $ref: '#/components/schemas/BotStats'

  /analytics/workflows:
    get:
      tags:
        - Analytics
      summary: è·å–å·¥ä½œæµæ‰§è¡Œåˆ†æ
      security:
        - bearerAuth: []
      parameters:
        - name: start_date
          in: query
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: æˆåŠŸè¿”å›å·¥ä½œæµåˆ†ææ•°æ®
          content:
            application/json:
              schema:
                type: object
                properties:
                  workflow_stats:
                    type: array
                    items:
                      $ref: '#/components/schemas/WorkflowStats'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    BotId:
      name: bot_id
      in: path
      required: true
      description: Bot ID
      schema:
        type: string
      example: work_bot_001

    WorkflowId:
      name: workflow_id
      in: path
      required: true
      description: å·¥ä½œæµ ID
      schema:
        type: string
      example: sop_001

    GroupId:
      name: group_id
      in: path
      required: true
      description: ç¾¤èŠ ID
      schema:
        type: string
      example: group_001

    KnowledgeFileId:
      name: file_id
      in: path
      required: true
      description: çŸ¥è¯†æ–‡ä»¶ ID
      schema:
        type: string
      example: file_001

  schemas:
    LoginRequest:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
          minLength: 1
        password:
          type: string
          minLength: 6

    RefreshTokenRequest:
      type: object
      required:
        - refresh_token
      properties:
        refresh_token:
          type: string

    AuthUser:
      type: object
      required:
        - user_id
        - username
        - role
      properties:
        user_id:
          type: string
        username:
          type: string
        email:
          type: string
          format: email
        avatar:
          type: string
        role:
          type: string
          enum: [admin, user]

    AuthTokens:
      type: object
      required:
        - access_token
        - refresh_token
        - expires_in
        - user
      properties:
        access_token:
          type: string
        refresh_token:
          type: string
        token_type:
          type: string
          default: Bearer
        expires_in:
          type: integer
          description: access_tokenæœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
        user:
          $ref: '#/components/schemas/AuthUser'

    DashboardStats:
      type: object
      required:
        - active_bots
        - running_workflows
        - active_groups
        - today_conversations
      properties:
        active_bots:
          type: integer
          description: æ´»è·ƒBotæ•°é‡
        running_workflows:
          type: integer
          description: è¿è¡Œä¸­çš„å·¥ä½œæµæ•°é‡
        active_groups:
          type: integer
          description: æ´»è·ƒç¾¤èŠæ•°é‡
        today_conversations:
          type: integer
          description: ä»Šæ—¥å¯¹è¯æ¬¡æ•°

    Activity:
      type: object
      required:
        - execution_id
        - title
        - description
        - type
        - time
        - timestamp
      properties:
        execution_id:
          type: string
        title:
          type: string
        description:
          type: string
        type:
          type: string
          enum: [success, error, warning, info]
        icon:
          type: string
        time:
          type: string
          description: æ ¼å¼åŒ–çš„æ—¶é—´æ˜¾ç¤º
        timestamp:
          type: string
          format: date-time

    User:
      type: object
      required:
        - user_id
        - username
      properties:
        user_id:
          type: string
        username:
          type: string
        email:
          type: string
          format: email
        avatar:
          type: string
          description: å¤´åƒURLæˆ–emoji
        role:
          type: string
          enum: [admin, user]
          default: user
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Bot:
      type: object
      required:
        - bot_id
        - name
        - type
        - scene
        - status
      properties:
        bot_id:
          type: string
          description: Botå”¯ä¸€æ ‡è¯†
          example: work_bot_001
        name:
          type: string
          description: Botåç§°
          example: å·¥ä½œä¼™ä¼´
        avatar:
          type: string
          description: å¤´åƒemojiæˆ–URL
          example: ğŸ’¼
        type:
          type: string
          enum: [work, life, love, group, sop]
          description: Botç±»å‹
        scene:
          type: string
          enum: [work, life, love, group, sop]
          description: åœºæ™¯ç±»å‹
        status:
          type: string
          enum: [online, offline, suspended]
          description: online=åœ¨çº¿, offline=ç¦»çº¿, suspended=æš‚åœ
        description:
          type: string
          description: Botæè¿°
        config:
          type: object
          description: Boté…ç½®ï¼ˆæ¨¡å‹ã€å‚æ•°ç­‰ï¼‰
          properties:
            model:
              type: string
              example: gpt-4
            temperature:
              type: number
              format: float
              minimum: 0
              maximum: 2
            max_tokens:
              type: integer
            system_prompt:
              type: string
        stats:
          type: object
          description: ç»Ÿè®¡æ•°æ®
          properties:
            conversation_count:
              type: integer
            response_rate:
              type: string
              pattern: ^\d+%$
            avg_response_time:
              type: string
              example: 2.3s
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    BotCreateRequest:
      type: object
      required:
        - name
        - type
        - scene
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 50
        avatar:
          type: string
          maxLength: 100
        type:
          type: string
          enum: [work, life, love, group, sop]
        scene:
          type: string
          enum: [work, life, love, group, sop]
        description:
          type: string
          maxLength: 500
        config:
          type: object
          properties:
            model:
              type: string
            temperature:
              type: number
              format: float
              minimum: 0
              maximum: 2
            max_tokens:
              type: integer
              minimum: 1
              maximum: 32000
            system_prompt:
              type: string
              maxLength: 2000

    BotUpdateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 50
        avatar:
          type: string
          maxLength: 100
        description:
          type: string
          maxLength: 500
        config:
          type: object
          properties:
            model:
              type: string
            temperature:
              type: number
              format: float
              minimum: 0
              maximum: 2
            max_tokens:
              type: integer
            system_prompt:
              type: string
              maxLength: 2000

    BotStats:
      type: object
      properties:
        bot_id:
          type: string
        bot_name:
          type: string
        total_conversations:
          type: integer
        avg_response_time:
          type: number
          format: float
        success_rate:
          type: number
          format: float
          description: æˆåŠŸç‡ï¼ˆ0-1ï¼‰

    Topic:
      type: object
      required:
        - topic_id
        - name
        - type
      properties:
        topic_id:
          type: string
        name:
          type: string
        type:
          type: string
          enum: [work, life, love, group, sop]
        theme_config:
          type: object
          description: ä¸»é¢˜é…è‰²é…ç½®
          properties:
            primary:
              type: string
              pattern: ^#[0-9A-Fa-f]{6}$
            background:
              type: string
              description: æ¸å˜èƒŒæ™¯CSS
        is_active:
          type: boolean
          default: true

    Message:
      type: object
      required:
        - message_id
        - conversation_id
        - sender_type
        - sender_id
        - content
        - timestamp
      properties:
        message_id:
          type: string
        conversation_id:
          type: string
          description: å¯¹è¯IDï¼ˆå¯¹äºç¾¤èŠä¸ºgroup_idï¼‰
        sender_type:
          type: string
          enum: [user, bot, system]
        sender_id:
          type: string
          description: å‘é€è€…IDï¼ˆuser_idæˆ–bot_idï¼‰
        content:
          type: string
        metadata:
          type: object
          description: æ¶ˆæ¯å…ƒæ•°æ®ï¼ˆå¦‚æ¨¡å‹ã€tokenæ•°ç­‰ï¼‰
          additionalProperties: true
        timestamp:
          type: string
          format: date-time

    Workflow:
      type: object
      required:
        - sop_id
        - bot_id
        - name
        - triggers
        - workflow_steps
        - enabled
      properties:
        sop_id:
          type: string
          description: å·¥ä½œæµå”¯ä¸€æ ‡è¯†
          example: sop_001
        bot_id:
          type: string
          description: å…³è”çš„Bot ID
        name:
          type: string
          description: å·¥ä½œæµåç§°
          example: æ¯æ—¥å·¥ä½œå¯åŠ¨æµç¨‹
        description:
          type: string
          description: å·¥ä½œæµæè¿°
        triggers:
          type: array
          description: è§¦å‘æ¡ä»¶åˆ—è¡¨
          items:
            type: object
            required: [type]
            properties:
              type:
                type: string
                enum: [cron, event, condition, chain]
              expression:
                type: string
                description: cronè¡¨è¾¾å¼æˆ–æ¡ä»¶è¡¨è¾¾å¼
              timezone:
                type: string
                description: æ—¶åŒºï¼ˆç”¨äºcronè§¦å‘ï¼‰
              event_type:
                type: string
                description: äº‹ä»¶ç±»å‹ï¼ˆç”¨äºäº‹ä»¶è§¦å‘ï¼‰
        workflow_steps:
          type: array
          description: å·¥ä½œæµæ­¥éª¤
          items:
            type: object
            required: [step, action]
            properties:
              step:
                type: integer
                description: æ­¥éª¤åºå·
              action:
                type: string
                enum: [send_message, fetch_calendar, generate_summary, call_api, wait, condition]
              content:
                type: string
              ai_generate:
                type: boolean
                description: æ˜¯å¦ä½¿ç”¨AIç”Ÿæˆå†…å®¹
              source:
                type: string
                description: æ•°æ®æº
              prompt:
                type: string
                description: AIæç¤ºè¯
        enabled:
          type: boolean
          description: æ˜¯å¦å¯ç”¨
        stats:
          type: object
          description: æ‰§è¡Œç»Ÿè®¡
          properties:
            execution_count:
              type: integer
            success_rate:
              type: string
              pattern: ^\d+%$
            avg_duration:
              type: string
              example: 2.3s
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    WorkflowCreateRequest:
      type: object
      required:
        - bot_id
        - name
        - triggers
        - workflow_steps
      properties:
        bot_id:
          type: string
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          maxLength: 500
        triggers:
          type: array
          items:
            type: object
            required: [type]
            properties:
              type:
                type: string
                enum: [cron, event, condition, chain]
              expression:
                type: string
              timezone:
                type: string
        workflow_steps:
          type: array
          items:
            type: object
            required: [step, action]
            properties:
              step:
                type: integer
              action:
                type: string
              content:
                type: string
              ai_generate:
                type: boolean
        enabled:
          type: boolean
          default: true

    WorkflowUpdateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          maxLength: 500
        triggers:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
              expression:
                type: string
              timezone:
                type: string
        workflow_steps:
          type: array
          items:
            type: object
            properties:
              step:
                type: integer
              action:
                type: string
              content:
                type: string

    WorkflowRun:
      type: object
      required:
        - execution_id
        - sop_id
        - status
      properties:
        execution_id:
          type: string
          description: æ‰§è¡Œè®°å½•ID
        sop_id:
          type: string
          description: å·¥ä½œæµID
        trigger_time:
          type: string
          format: date-time
          description: è®¡åˆ’è§¦å‘æ—¶é—´
        status:
          type: string
          enum: [pending, running, completed, failed, cancelled]
          description: pending=ç­‰å¾…æ‰§è¡Œ, running=æ‰§è¡Œä¸­, completed=å·²å®Œæˆ, failed=å¤±è´¥, cancelled=å·²å–æ¶ˆ
        result:
          type: object
          description: æ‰§è¡Œç»“æœï¼ˆæˆåŠŸæ—¶ï¼‰
          additionalProperties: true
        error_message:
          type: string
          description: é”™è¯¯ä¿¡æ¯ï¼ˆå¤±è´¥æ—¶ï¼‰
        started_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
        duration:
          type: string
          description: æ‰§è¡Œæ—¶é•¿
          example: 2.3s
        steps:
          type: array
          description: æ­¥éª¤æ‰§è¡Œè¯¦æƒ…
          items:
            type: object
            properties:
              step:
                type: integer
              action:
                type: string
              status:
                type: string
              result:
                type: object
              error:
                type: string

    WorkflowStats:
      type: object
      properties:
        sop_id:
          type: string
        sop_name:
          type: string
        total_executions:
          type: integer
        success_count:
          type: integer
        failed_count:
          type: integer
        avg_duration:
          type: number
          format: float

    GroupChat:
      type: object
      required:
        - group_id
        - name
        - type
        - routing_strategy
        - conversation_mode
      properties:
        group_id:
          type: string
          description: ç¾¤èŠå”¯ä¸€æ ‡è¯†
          example: group_001
        name:
          type: string
          description: ç¾¤èŠåç§°
          example: åˆ›ä¸šé¡¾é—®å›¢
        type:
          type: string
          enum: [personal, team, public]
          description: personal=ä¸ªäººç¾¤, team=å›¢é˜Ÿç¾¤, public=å…¬å…±ç¾¤
        description:
          type: string
          description: ç¾¤èŠæè¿°
        routing_strategy:
          type: string
          enum: [keyword_match, ai_judge, round_robin, broadcast]
          description: keyword_match=å…³é”®è¯åŒ¹é…, ai_judge=AIåˆ¤æ–­, round_robin=è½®è¯¢, broadcast=å…¨å‘˜å“åº”
        conversation_mode:
          type: string
          enum: [single_turn, multi_turn]
          description: single_turn=å•è½®å¯¹è¯, multi_turn=å¤šè½®å¯¹è¯
        status:
          type: string
          enum: [active, inactive, archived]
          default: active
        created_by:
          type: string
          description: åˆ›å»ºè€…user_id
        members:
          type: array
          description: ç¾¤æˆå‘˜åˆ—è¡¨
          items:
            $ref: '#/components/schemas/GroupMember'
        stats:
          type: object
          description: ç¾¤èŠç»Ÿè®¡
          properties:
            conversation_count:
              type: integer
            response_rate:
              type: string
            response_speed:
              type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    GroupCreateRequest:
      type: object
      required:
        - name
        - type
        - routing_strategy
        - conversation_mode
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 50
        type:
          type: string
          enum: [personal, team, public]
        description:
          type: string
          maxLength: 500
        routing_strategy:
          type: string
          enum: [keyword_match, ai_judge, round_robin, broadcast]
        conversation_mode:
          type: string
          enum: [single_turn, multi_turn]

    GroupUpdateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 50
        description:
          type: string
          maxLength: 500
        status:
          type: string
          enum: [active, inactive, archived]

    GroupMember:
      type: object
      required:
        - id
        - group_id
        - bot_id
        - role
      properties:
        id:
          type: integer
          description: æˆå‘˜è®°å½•ID
        group_id:
          type: string
        bot_id:
          type: string
        role:
          type: string
          description: è§’è‰²åç§°
          example: CEO
        permissions:
          type: array
          description: æƒé™åˆ—è¡¨
          items:
            type: string
            enum: [read, write, mention, admin]
        trigger_keywords:
          type: array
          description: è§¦å‘å…³é”®è¯åˆ—è¡¨
          items:
            type: string
        priority:
          type: integer
          description: ä¼˜å…ˆçº§ï¼ˆæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰
          minimum: 1
          default: 10

    GroupMemberAddRequest:
      type: object
      required:
        - bot_id
        - role
      properties:
        bot_id:
          type: string
        role:
          type: string
          maxLength: 50
        permissions:
          type: array
          items:
            type: string
            enum: [read, write, mention, admin]
          default: [read, write]
        trigger_keywords:
          type: array
          items:
            type: string
        priority:
          type: integer
          minimum: 1
          default: 10

    GroupMessage:
      type: object
      required:
        - message_id
        - group_id
        - sender_type
        - sender_id
        - content
        - timestamp
      properties:
        message_id:
          type: string
        group_id:
          type: string
        sender_type:
          type: string
          enum: [user, bot, system]
        sender_id:
          type: string
        content:
          type: string
        mentioned_bots:
          type: array
          description: '@æåŠçš„Bot IDåˆ—è¡¨'
          items:
            type: string
        status:
          type: string
          enum: [sending, sent, failed]
          description: sending=å‘é€ä¸­, sent=å·²å‘é€, failed=å‘é€å¤±è´¥
        timestamp:
          type: string
          format: date-time

    Memory:
      type: object
      required:
        - memory_id
        - bot_id
        - type
        - content
      properties:
        memory_id:
          type: string
        bot_id:
          type: string
        user_id:
          type: string
          description: å…³è”çš„ç”¨æˆ·IDï¼ˆå¯é€‰ï¼‰
        type:
          type: string
          enum: [conversation, preference, fact, instruction]
          description: conversation=å¯¹è¯è®°å½•, preference=ç”¨æˆ·åå¥½, fact=äº‹å®ä¿¡æ¯, instruction=æŒ‡ä»¤
        content:
          type: string
          description: è®°å¿†å†…å®¹
        importance:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: é‡è¦æ€§è¯„åˆ†ï¼ˆ0-1ï¼‰
          default: 0.5
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    MemoryCreateRequest:
      type: object
      required:
        - bot_id
        - type
        - content
      properties:
        bot_id:
          type: string
        user_id:
          type: string
        type:
          type: string
          enum: [conversation, preference, fact, instruction]
        content:
          type: string
          minLength: 1
        importance:
          type: number
          format: float
          minimum: 0
          maximum: 1
          default: 0.5

    KnowledgeFile:
      type: object
      required:
        - file_id
        - bot_id
        - filename
        - status
      properties:
        file_id:
          type: string
        bot_id:
          type: string
        filename:
          type: string
        mime_type:
          type: string
        size_bytes:
          type: integer
        status:
          type: string
          enum: [uploading, processing, ready, failed]
        chunk_count:
          type: integer
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    KnowledgeSearchRequest:
      type: object
      required:
        - bot_id
        - query
      properties:
        bot_id:
          type: string
        query:
          type: string
          minLength: 1
        top_k:
          type: integer
          minimum: 1
          maximum: 20
          default: 5

    KnowledgeSearchResult:
      type: object
      properties:
        query:
          type: string
        hits:
          type: array
          items:
            type: object
            properties:
              file_id:
                type: string
              chunk_id:
                type: string
              score:
                type: number
                format: float
              content:
                type: string
              metadata:
                type: object
                additionalProperties: true

    ConversationAnalytics:
      type: object
      properties:
        period:
          type: object
          properties:
            start_date:
              type: string
              format: date
            end_date:
              type: string
              format: date
        total_conversations:
          type: integer
        total_messages:
          type: integer
        avg_conversation_length:
          type: number
          format: float
        daily_stats:
          type: array
          description: æ¯æ—¥ç»Ÿè®¡æ•°æ®
          items:
            type: object
            properties:
              date:
                type: string
                format: date
              conversation_count:
                type: integer
              message_count:
                type: integer
        bot_breakdown:
          type: array
          description: æŒ‰Botåˆ†ç»„çš„ç»Ÿè®¡
          items:
            type: object
            properties:
              bot_id:
                type: string
              bot_name:
                type: string
              conversation_count:
                type: integer
              message_count:
                type: integer

    ErrorResponse:
      type: object
      required:
        - error
      properties:
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
              description: é”™è¯¯ç 
              example: BOT_NOT_FOUND
            numeric_code:
              type: integer
              description: é”™è¯¯ç¼–å·ï¼ˆç”¨äºå†…éƒ¨å½’ç±»ï¼‰
              example: 1001
            message:
              type: string
              description: é”™è¯¯ä¿¡æ¯
              example: Botä¸å­˜åœ¨
            details:
              type: object
              description: é¢å¤–çš„é”™è¯¯è¯¦æƒ…
              additionalProperties: true

  responses:
    BadRequest:
      description: è¯·æ±‚å‚æ•°é”™è¯¯
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: BAD_REQUEST
              message: è¯·æ±‚å‚æ•°æ— æ•ˆ
              details:
                field: name
                reason: é•¿åº¦ä¸èƒ½è¶…è¿‡50å­—ç¬¦

    NotFound:
      description: èµ„æºä¸å­˜åœ¨
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: NOT_FOUND
              message: è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨

    Unauthorized:
      description: æœªæˆæƒ
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: UNAUTHORIZED
              message: è¯·å…ˆç™»å½•

    Forbidden:
      description: æƒé™ä¸è¶³
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: FORBIDDEN
              message: æ‚¨æ²¡æœ‰æƒé™æ‰§è¡Œæ­¤æ“ä½œ

    InternalError:
      description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: INTERNAL_ERROR
              message: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•
